<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Chatterbox</title>
  <base href="<%= locals.baseURL %>" />
  <link rel="icon" href="./mainView/favicon.ico" />
  <link rel="stylesheet" href="./mainView/css/styles.css" />
  <script type="module" src="./mainView/js/index.js"></script>
  <script type="module" src="./mainView/js/components/logged-in-box/index.js"></script>

  <% if (locals.user) { %>
    <script type="module" src="./mainView/js/webSocket.js"></script>
  <% } %>

  <% if (locals.view === 'settings') { %>
    <link rel="stylesheet" href="./settingsView/css/settingsStyles.css" />
    <script type="module" src="./settingsView/js/components/settings-comps/profile-selector/index.js"></script>
    <script type="module" src="./settingsView/js/components/settings-comps/delete-account/index.js"></script>
  <% } %>

  <% if (locals.view === 'friends') { %>
    <link rel="stylesheet" href="./friendView/css/friendsStyles.css" />
  <% } %>

  <% if (locals.view === 'chat') { %>
    <link rel="stylesheet" href="./chatView/css/chatStyles.css" />
    <script type="module" src="./chatView/js/components/chat-app/index.js"></script>
    <script type="module" src="./chatView/js/components/call-display/index.js"></script>
    <script type="module" src="./chatView/js/components/video-audio-chat/index.js"></script>
  <% } %>

  <%- defineContent('style') %>
  <%- defineContent('script') %>
</head>

<body <%= !locals.user ? 'id=starting-pages' : 'id=logged-in-pages' %>>
  <% if (locals.user) { %>
    <%- include('../partials/header.ejs') %>
  <% } %>

  <main role="main" class="container">
    <%- include('../partials/flash') %>
    <%- body %>
  </main>

  <% if (locals.user) { %>
  <%- include('../partials/footer') %>
  <% } %>  
</body>

</html>
